# 概论

-   相邻像素
    -   4邻域$N_4(p)$：上下左右；
    -   D邻域$N_D(p)$：对角上的点；
    -   8邻域$N_8(p)$：周围8个点，$N_4(p)+N_D(p)$；
-   像素间的连通性：
    -   描述了区域和边界的概念：
    -   连通必要条件：
        -   两个像素的位置是否相邻；
        -   两个像素的灰度值是否相似；
    -   4连通：具有相似色值的两个像素，q在集合$N_4(p)$中；
    -   8连通：具有相似色值的两个像素，q在集合$N_8(p)$中；
    -   m连通：具有相似色值的两个像素，q在集合$N_4(p)$或$N_D(p)$中，且$N_4(p)$和$N_4(q)$的交集没有相似像素；
    -   通路：具有连通性的像素构成一条序列，即构成一条通路；
    -   距离：定义：
        -   $D(p,q)\ge0$
        -   $D(p,q)=D(q,p)$
        -   $D(p.z)\le D(q,p)+D(q,z)$  （三角形）
    -   欧氏距离：$\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$；
    -   $D_4$距离 城市距离：$|x_1-x_2|+|y_1-y_2|$；
    -   $D_8$距离 棋盘距离：$max(|x_1-x_2|,|y_1-y_2|)$；

# 图像增强

>   Facebook 深度学习，3D手部模型实时。

-   空间域图像增强
    -   突出某些信息，或削弱去除某些信息；
    -   目的是改善图像的视觉效果；
-   图像增强：
    -   处理方法：
        -   空域方法：
            -   点处理（变换）
                -   反转变换$s=(L-1)-r$，$[0,L-1]$是图像的灰度级；
                -   对数变化$s=c\ log(1+r)\ \ (r\ge 0,\ c\ is\ const\ value)$；
                    -   可以将小级数变大大级数变小，如$10^{-9}$，就能显示为$-9$；
                -   幂次变换$s=c\ r^\gamma$
                    -   $\gamma<1$可以使图像变亮，反之变暗；
                -   对比度拉伸：
                    -   提高图像处理时灰度级的范围；
                -   灰度级切片：对某个范围的灰度值进行变换，起到切片或突出的作用；
                -   位平面切片：将不同灰度值生成一张图片；
                
            -   模板处理（滤波）

                -   线性滤波器：按模板取得像素的顺序进行滤波；

                -   非线性滤波器：对像素的顺序进行重新处理后的滤波；

                -   平滑空间滤波器；

                    -   去除图像中的一些不重要的细节；
                    -   思路：去除部分高频信号；
                    -   e.g. 也可以用于提取图像中的一些细节；

                    >   Ai使用遍历各种大小的模板，筛选结果符合预期的模板，将不符合设置为不重要的模板。

                -   锐化空间滤波器；

                    -   突出图像中的高频细节
                    -   思路：减少部分低频信号；
                    -   计算梯度：拉普拉斯算子计算梯度

                    $$
                    g(x,y)=\begin{equation}f(x,y)-\nabla^2 f(x,y)\\ \end{equation}
                    $$

                    -   Roberts交叉梯度算子：

                    $$
                    \nabla f =|z_9-z_5|+|z_8-z_5|
                    $$

                    -   Prewitt梯度算子：（相对于roberts，强化了中间）

                    $$
                    \nabla f =|(z_7+z_8+z_9)-(z_1+z_2+z_3)|\\+|(z_3+z_6+z_9)-(z_1+z_4+z_7)|
                    $$

                    -   Sobel梯度算子：

                    $$
                    \nabla f =|(z_7+2z_8+z_9)-(z_1+2z_2+z_3)|\\+|(z_3+2z_6+z_9)-(z_1+2z_4+z_7)|
                    $$

        -   频域方法（更好的方法）：修改图像的信号，如傅里叶变换等；

            -   频域滤波：使用傅里叶变换等进行筛选累加元；
        -   

    -   处理策略：
        
        -   全局处理
        -   局部处理
        
    -   处理对象：
        -   灰度图像
        -   彩色图像

>   高斯白噪声：正态分布，均值0
>
>   若有n个带噪声的相关图像，通过叠加/n，可起到降噪效果。

>   代数减法：去除图像中不需要的叠加性图案。
>
>   e.g. 摄像头检测动目标，使用以前的静止环境图像，将带有运动物体的图像减去静止图像，剩余的就是带有运动物体的黑背景图像。

>   乘法：蒙版。

>   非：得到阴图像，按位取反。

>   与：两图像交集，可用于提取图像的子图像（模板也可）

>   或：并集。

>   异或：相异为1

>   直方图均衡化：计算量小，统计图像每个色值的概率：
>   $$
>   p(r_k)=n_k/n
>   $$
>
>   -   $r_k$第k色值出现的数量；
>   -   $n_k$该像素出现的次数；
>   -   $n$总共的像素数量；
>
>   直方图均衡化：
>   $$
>   s=T(r)=\int^r_0p_r(w)dw\\\Rightarrow s_k=T(r_k)=\sum^k_{j=0}\cfrac{n_j}n
>   $$
>   

-   salt-and-pepper noise（椒盐噪声）：有黑有白。
-   gaussian noise（高斯噪声）：满足正态分布的某种颜色的噪声。

## 频域图像增强

### 傅里叶变换及其反变换

为什么使用？

-   会变得简单；
-   滤波的使用更加直观；
-   可以在频率域指定滤波器，做反变换；
-   一旦通过频率域试验选择了空间滤波，通常实施都是在空间域进行（？



一维变量连续信号$f(x)$，的傅里叶变换$F(x)$
$$
F(u)=\int^\infty_{-\infty}f(x)e^{-j2\pi ux}dx,\ \ where\ j=\sqrt{-1}
$$
反变换：
$$
f(x)=\int^\infty_{-\infty}F(u)e^{j2\pi ux}du
$$
二维变量连续信号$f(x)$，的傅里叶变换$F(x)$
$$
F(u,v)=\int^\infty_{-\infty}\int^\infty_{-\infty}f(x,y)e^{-j2\pi (ux+vy)}dxdy,\ \ where\ j=\sqrt{-1}
$$
反变换：
$$
f(x,y)=\int^\infty_{-\infty}\int^\infty_{-\infty}F(u,v)e^{-j2\pi (ux+vy)}dudv
$$

$$
e^{j\theta}=cos\theta+j\ sin\theta
$$

二维变量傅里叶离散化：



反变换：





若$f(x,y)$是实函数，它的傅里叶变换是对称的：$F(u,v)=F(-u,-v)$



对复数进行处理。

### 傅里叶变换的性质



### 快速傅里叶变换 FFT



## 频率域滤波

### 陷波滤波器

图像中间的值为均值，而均值在整个图像中不具有较大的意义，因此可以将它赋值为0，从而突出其他信息。
$$
H(u,v)=\begin{cases}
0,(u,v)=(M/2,N/2)\\
1,else
\end{cases}
$$


### 低通（平滑）滤波器

被低通滤波的图像比原始图像少尖锐的部分，从而突出平滑过渡的部分。

低频权重高，高频权重低。
$$
H(u)=Ae^{-u^2/2\sigma^2}
$$

理想低通滤波太陡了，需要一点光滑边。


$$
H(u,v)=\cfrac{1}{1+[D(u,v)/D_0]^{2n}}
$$
$D_0$：截止频率；

$n$：1最容易实现，系数越高效果越好。

二维高斯低通滤波器GLPF：
$$
H(u,v)=e^{D(u,v)/D}
$$


### 高通（锐化）滤波器

被高通滤波的图像比原图像少灰度级的平滑过渡部分，从而突出边缘等细节。

低频权重低，高频权重低。

# 图像复原和重建

>   复原和增强的区别和联系（重点考题）

确定信号：

随机信号：



## 图像退化/复原过程的模型

对于一个图像$f(x,y)$，输出一个退化图像$g(x,y)$，$H$表示退化模型，$n(x,y)$为退化模型的输入噪声。
$$
g(x,y)=h(x,y)*f(x,y)+n(x,y)\\\Rightarrow G(u,v)=H(u,v)F(u,v)+N(u,v)
$$
即，找到噪声和退化模型，就能找到图像复原方法。

$h(x,y)$表示退化函数的空间描述，变换需要满足参数线性、线性时间不变（无论什么时候做都不会影响结果）

实际中，满足上面条件的很少，更多的是复杂的，因此需要假设再处理。

1.   噪声模型：在图像获得的数字化过程、网络传输（无线传输）中产生；
     1.   噪声是随机信号，但它是有规律的，因此可以用一个PDF进行描述它们的分布。
     2.   高斯噪声：
     3.   瑞利噪声：
     4.   伽马（爱尔兰）噪声：
     5.   指数噪声：
     6.   均匀分布噪声：
     7.   脉冲噪声：
2.   周期噪声：

## 空间域滤波复原

1.   加性噪声；
2.   乘性噪声：

空间滤波：

1.   均值滤波：

     1.   几何均值滤波器：优点：丢失更少图像细节（相对锐化）

     2.   谐波均值滤波器：适合处理盐噪声，但对于胡椒噪声效果一般（从公式理解）

     3.   逆谐波均值滤波器：Q为正数用于处理胡椒噪声，Q为负数用于处理盐噪声。
          $$
          f(x,y)=\cfrac{\sum_{(s,t)\in S_p}g(s,t)^{Q-1}}{\sum_{(s,t)\in S_p}g(s,t)^{Q}}
          $$
          

2.   顺序统计滤波器：类似于非线性滤波器

     1.   中点滤波器：取最大值和最小值的平均；
     2.   阿尔法均值滤波器：认为最大值和最小值不重要，因此只取它们的一半后的值算入几何均值统计；（能做多种噪声）

3.   自适应滤波器：
     $$
     \hat f(x,y)=g(x,y)-\cfrac{\sigma_n^2}{\sigma_L^2}[g(x,y)-m_L]
     $$
     可去椒盐噪声；

     平滑其他非激噪声；

     减少物体边界细化或粗化等失真；

## 频率域滤波复原

1.   带阻滤波器：不让区域$[f_1,f_2]$的频率通过；
2.   带通滤波器：让区域$[f_1,f_2]$的频率通过；
3.   陷波滤波器：不让特定区域内的波通过；
4.   最佳陷波滤波器

## 图像退化与重建

特性：

1.   可加性：
2.   齐次性：可加性的拓展

对于噪声来说，频率谱更适合展示。

1.   逆滤波：
2.   估计退化函数：根据先验函数模型，猜参数。
3.   最小均方误差滤波器（维纳滤波）
4.   约束最小二乘方滤波器（维纳滤波的改进）
5.   几何均值滤波

### 投影重建



1.   图像断层CT重建



# 彩色图像处理



## 彩色基础知识

彩色优点：

1.   符合人类视觉特点；
2.   有用的描述子；

三原色：



## 色彩空间

-   RGB
-   CMYK
-   HSI：计算机视觉比较关注；
-   YIQ：彩色电视广播（北美标准）
-   YUV：彩色电视广播（欧洲标准）
-   YCbCr：JPEG采用的色彩空间；

## 伪彩色技术

-   强度分层技术；
-   灰度级到彩色的转换：对彩色三个通道分别映射；

## 全彩色变化



## 彩色变化

灰度变化变为3个通道。

## 彩色图像平滑核锐化



## 彩色空间分割
