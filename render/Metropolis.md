# Metropolis

## Introduction

光传输（Metropolis）理论主要研究辐射和粒子传输问题。文章中，光都遵循几何光学模型，即光只在物体表面被发射、散射或被表面吸收，光在物体表面间沿直线传播，忽略光的波动性和量子模型。

### BRDF 双向传输理论

Metropolis提出了一个基于线性计算理论的简单光传输模型，该模型将光传输、重要性传输和粒子追踪进行了统一。

> BRDF模型不一定是对称的，例如折射。

Metropolis遵循热力学定律，特别是基尔霍夫定律（Kirchhoff's laws）和详细平衡原理（detailed balance），建立了新的交易原则（reciprocity principles）。基于新的交易原则，该文提出第一个光传输公式，自伴随（共轭）算子公式（self-adjoint operator）。

### 更好的蒙特卡洛技术

RR可以降低采样地消耗时间，但会增大方差。因此本文提出一种新的优化方法：将一个属性域另一个属性进行权衡，最大化结果估计器地效率。

### Metropolis

受计算物理地Metropolis采样方法的启发，该文提出了一种新的蒙特卡洛方法解决光传输问题。

1. 通过随机突变单个当前路径生成光传输路径序列（e.g 图标可能回味路径添加新顶点）。
2. 每个突变都以精心选择地概率被接受或拒绝，以确保能根据路径对所需最终图像地贡献对路径进行采样。
3. 在传输路径的空间上构造了一个随机游走（random walk）方法，从而可以通过简单地记录图像平面上这些路径地位置来形成无偏图像。

Metropolis是无偏估计，适合处理一般的几何和散射模型，只需要很少的存储开销，相较于以前的无偏方法效率高上几个数量级。

Metropolis的优势在于，路径空间是局部搜索，有利于对当前路径进行微小变化的突变：

- 每个样本的平均成本很小（一般每个像素只需1-2spp）；
- 一旦找到重要路径，也会搜索附近的路径，从而在多个样本中分摊寻找此路径的费用；
- 突变集易于扩展，通过构造在改变其他光源的同时保持路径某些重要属性（e.g. 使用那个光源）的突变。

$$
asdf=\dots
$$

